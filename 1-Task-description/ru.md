
# –ó–∞–¥–∞–Ω–∏–µ: CashBox API ‚Äî –í–µ—á–µ—Ä–Ω–∏–π –∫–ª–∏—Ä–∏–Ω–≥ –±–∞–Ω–∫–æ–º–∞—Ç–∞

## –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–≤—ã–∫–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —á–∞—Å—Ç–∏:
- —á—Ç–µ–Ω–∏—è –∏ —É—Ç–æ—á–Ω–µ–Ω–∏—è API-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π,
- –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (BPMN),
- –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–∏—Å—Ç–µ–º (UML),
- –±–∞–∑–æ–≤–æ–≥–æ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ë–î (ER / SQL),
- –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (NFR).

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

1. –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å OpenAPI-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π `cashbox.yaml`, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–ø–∏—Å–∞–Ω REST-—ç–Ω–¥–ø–æ–π–Ω—Ç `/cash/transactions`.

2. –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ **3‚Äì5 —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤** –ø–æ API –∏ –ø—Ä–æ—Ü–µ—Å—Å—É.
   –ó–∞—Ç–µ–º –ø—Ä–µ–¥–ª–æ–∂–∏—Ç–µ **—Å–≤–æ–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –∏ –æ—Ç–≤–µ—Ç—ã** –Ω–∞ –Ω–∏—Ö.

3. –ù–∞—Ä–∏—Å—É–π—Ç–µ **BPMN-–¥–∏–∞–≥—Ä–∞–º–º—É** –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞:
   - –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã –±–∞–Ω–∫–æ–º–∞—Ç–∞
   - –ü–æ–¥—Å—á—ë—Ç –æ—Å—Ç–∞—Ç–∫–∞
   - –°–≤–µ—Ä–∫–∞ —Å –ù–ì–õ
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–æ–¥–æ–∫
   - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–Ω—è

4. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ **UML Sequence Diagram** –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
   `ATM ‚Üí CashBox ‚Üí New General Ledger (NGL)`

5. –û–ø–∏—à–∏—Ç–µ **ER-–º–æ–¥–µ–ª—å** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö CashBox:
   - –¢–∞–±–ª–∏—Ü—ã `cash_operations`, `atm_balances`
   - –ö–ª—é—á–∏, –∏–Ω–¥–µ–∫—Å—ã, –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏

6. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç **NFR.md**, –≤–∫–ª—é—á–∞—é—â–∏–π:
   - –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ REST API (`latency`) ‚â§ 200 –º—Å
   - –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å Kafka (`throughput`) ‚â• 200 msg/s
   - Retry-policy: 3 –ø–æ–ø—ã—Ç–∫–∏, –∑–∞—Ç–µ–º DLQ
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚â• 365 –¥–Ω–µ–π

7. üèÖ **–ë–æ–Ω—É—Å (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)**:
   https://github.com/kobzevvv/CashBox-API-homework/blob/main/2-Bonus-Task-mock-api-server/ru.md
   


---

## –ß—Ç–æ –ø—Ä–∏—Å–ª–∞—Ç—å –Ω–∞ –≤—ã—Ö–æ–¥–µ

| –ê—Ä—Ç–µ—Ñ–∞–∫—Ç | –§–æ—Ä–º–∞—Ç |
|----------|--------|
| `cashbox.yaml` | OpenAPI YAML |
| `evening_clearing.bpmn` | BPMN 2.0 |
| `sequence.png` | UML Sequence Diagram |
| `schema.sql` | SQL (DDL) |
| `NFR.md` | Markdown |
| `assumptions.md` | –£—Ç–æ—á–Ω–µ–Ω–∏—è –∏ –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã |
| `mock-server/` | *(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)* mock-—Å–µ—Ä–≤–µ—Ä / —ç–∫—Å–ø–æ—Ä—Ç Mockoon

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Mockoon](https://mockoon.com/) ‚Äî mock API —Å–µ—Ä–≤–µ—Ä
- [Swagger Editor](https://editor.swagger.io/) ‚Äî OpenAPI —Ä–µ–¥–∞–∫—Ç–æ—Ä
- [Camunda Modeler](https://camunda.com/download/modeler/) ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä BPMN 2.0
- [draw.io (diagrams.net)](https://app.diagrams.net/) ‚Äî UML, BPMN, ER
- [Kafka retry mechanisms](https://www.confluent.io/blog/kafka-error-handling/) ‚Äî Dead-letter queue –∏ backoff

---

## –õ–æ–≥–∏–∫–∞ API

POST `/cash/transactions` ‚Äî —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é –≤ –±–∞–Ω–∫–æ–º–∞—Ç–µ.  
–ü—Ä–∏–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞:

```json
{
  "atmId": "ATM-MSK-001",
  "type": "CASH_IN",
  "amount": 5000.00,
  "currency": "RUB",
  "ts": "2025-07-21T15:30:00Z"
}
```

–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ Kafka-—Ç–æ–ø–∏–∫ `cash.tx.accepted.v1`.

